<% if (success_msg) { %>
    <div class="alert alert-success mt-3" role="alert"><%= success_msg %></div>
<% } %>
<% if (error_msg) { %>
    <div class="alert alert-danger mt-3" role="alert"><%= error_msg %></div>
<% } %>

<div class="container mt-4 mb-4">
    <div class="row justify-content-center">
        <div class="col-12 col-sm-10 col-md-8 col-lg-6 form-column">
            <div class="card">
                <div class="card-header text-center">
                    编辑资产
                </div>
                <div class="card-body">
                    <form action="/assets/edit/<%= asset._id %>" method="POST">
                        <div class="form-group mb-3"> <%# Added mb-3 for Bootstrap 5 spacing %>
                            <label for="name">名称:</label>
                            <input type="text" class="form-control" id="name" name="name" value="<%= asset.name %>" required>
                        </div>
                        <div class="form-group mb-3">
                            <label for="type">类型:</label>
                            <input type="text" class="form-control" id="type" name="type" value="<%= asset.type %>" required>
                        </div>
                        <div class="form-group mb-3">
                            <label for="quantity">数量:</label>
                            <input type="number" class="form-control" id="quantity" name="quantity" value="<%= asset.quantity %>" min="0" step="1" required>
                        </div>
                        <div class="form-group mb-3">
                            <label for="cost">成本:</label>
                            <input type="number" class="form-control" id="cost" name="cost" value="<%= asset.cost %>" step="0.01" min="0.01" required>
                        </div>
                        <div class="form-group mb-3">
                            <label for="currentValue">现值:</label>
                            <input type="number" class="form-control" id="currentValue" name="currentValue" value="<%= asset.currentValue %>" step="0.01" min="0" required>
                        </div> 
                        <div class="form-group mb-3">
                            <label for="purchaseDate">购买日期:</label>
                            <input type="date" class="form-control" id="purchaseDate" name="purchaseDate" value="<%= asset.purchaseDate ? new Date(asset.purchaseDate).toISOString().split('T')[0] : '' %>">
                        </div>
                        <div class="form-group mb-3">
                            <label for="condition">状况:</label>
                            <select class="form-control" id="condition" name="condition">
                                <option value="全新" <%= asset.condition === '全新' ? 'selected' : '' %>>全新</option>
                                <option value="良好" <%= asset.condition === '良好' ? 'selected' : '' %>>良好</option>
                                <option value="一般" <%= asset.condition === '一般' ? 'selected' : '' %>>一般</option>
                                <option value="较差" <%= asset.condition === '较差' ? 'selected' : '' %>>较差</option>
                                <option value="报废" <%= asset.condition === '报废' ? 'selected' : '' %>>报废</option>
                            </select>
                        </div>
                        <div class="form-group mb-3">
                            <label for="depreciationMethod">折旧方法:</label>
                            <select class="form-control" id="depreciationMethod" name="depreciationMethod">
                                <option value="直线折旧" <%= asset.depreciationMethod === '直线折旧' ? 'selected' : '' %>>直线折旧</option>
                                <option value="余额递减" <%= asset.depreciationMethod === '余额递减' ? 'selected' : '' %>>余额递减</option>
                            </select>
                        </div>
                        <div class="form-group mb-3">
                            <label for="depreciationRate">折旧率 (例如 0.10 代表 10%):</label>
                            <input type="number" class="form-control" id="depreciationRate" name="depreciationRate" step="0.01" min="0" max="1" value="<%= asset.depreciationRate %>" placeholder="0.00-1.00">
                        </div> 
                        <div class="form-group mb-4"> <%# Added mb-4 to give more space before buttons %>
                            <label for="notes">备注:</label>
                            <textarea class="form-control" id="notes" name="notes" rows="3"><%= asset.notes %></textarea>
                        </div>
                        <div class="d-flex gap-3"> <%# Using d-flex and gap-3 for button spacing %>
                            <button type="submit" class="btn btn-primary">保存</button>
                            <a href="/assets" class="btn btn-secondary">取消</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>